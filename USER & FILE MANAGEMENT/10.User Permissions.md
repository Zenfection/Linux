# Quyền truy cập người dùng

## 1. Users và Groups trong Linux

Linux là một hệ điều hành có nhiều người dùng, giống như những hệ điều hành nhiều người dùng khác, nó là khái niệm của `permissions`, vì theo mặc định, người ta không muốn một người dùng có thể chỉnh sửa các **files** của người dùng khác. Có 2 khái niệm chính cho `permissions` là : `users` và `groups`.

`Groups` là tập hợp từ 0 tới nhiều `users` và một `users` có thể có nhiều `groups`. **Files**, **directory** và file thực thi... có thể cấp quyền cả `users` và `groups`

Một số **ví dụ:**

1. Người ta có thể tạo ra một `group` gọi là **`print`** mà các thành viên có thể sử dụng máy in khi được gắn vào máy tính
2. Người ta có thể tạo ra một `group` gọi là `log` mà các thành viên có quyền truy cập vào đọc **file** trong **``/var/log``**.
3. Người ra có thể tạo ra một `group` gọi là `ssh` mà các thành viên có quyền đăng nhập điều khiển thông qua **SSH**

Đó là những ví dụ của `group`. Người ta có thể thay đổi các **files** cụ thể và thay đổi `permissions` của hệ thống cũng như mô tả, tất cả đều có thể.

### Danh sách `Groups`

**file** **``/etc/group``** chứa danh sách mọi `group` trong hệ thống. Hãy chạy lệnh **`cat /etc/group`** bạn sẽ thấy được toàn bộ danh sách của `group` (hoặc chạy lệnh **`less /etc/group`** để trãi nghiệm thao tác tốt hơn).

Bạn có thể sử dụng lệnh **`groups`** để thấy người dùng đang ở group nào như sau:

```shell
$ groups Zenfection
Zenfection : admin www-data rvm
$
```

**`Zenfection`** là tên người dùng, và ở đây có 3 group gồm : **`admin`**, **`www-data`** và **`rvm`**.

---

## 2. File Ownership

Trong Linux, mọi **file** và **directory** đều được `user owner` và `group owner`. Bạn có thể sử dụng lệnh **`ls -l`** hoặc **`ls -ld`** để xem quyền sở hữu của **files** hoặc **`directory`**.

Xem **ví dụ** sau:

```shell
ls -ld /var/log
drwrwxr-x 10 root syslog
    4096 Jun 13 06:25 /var/log
ls -l /var/log/syslog
-rw-r
```

| 🌍 [Tìm hiểu thêm](https://wiki.archlinux.org/index.php/File_permissions_and_attributes) |
| ---------------------------------------------------------------------------------------- |

---

## 3. Thay đổi Ownership bằng **`chown`**

Lệnh **`chown`** cho phép chugn1 ta thay đổi đồng thời `user` và `group` của chủ sỡ hữu của **files** và **directories**. Chạy lệnh này cần phải có quyền **`root`** nên phải kèm lệnh **`sudo`**

Để thay đổi `user` là chủ sỡ hữa một file cụ thể chạy những dòng lênh sau: 

```shell
sudo chown [username] /path/to/some/file
```

Để thay đổi cả `user` và `group` hãy chạy lệnh sau: (điền thông tin trong dấu **`[]`**)

```shell
sudo chown [username]:[new-group] /path/to/some/file
```

Để chỉ thay đổi group chạy lênh sau:

```shell
sudo chown :[new-group] /path/to/some/file 
```

> 💡 Nếu bạn không không có quyền **`root`**, bạn có thể thay đổi `permissions` của file bằng cách sử dụng lệnh **`chmod`**. **Nếu bạn là chủ sở hữa của file đó** thì được. Bạn không thể thay đổi `ownership` (với lệnh **`chown`** hoặc **`chgrp`**) mà không có quyền **`root`**
